'From Pharo4.0 of 18 March 2013 [Latest update: #40626] on 28 February 2016 at 1:47:41.721323 am'!!WebCrawler methodsFor: 'as yet unclassified' stamp: 'SamuelDindyal 2/28/2016 01:36'!parseHtml	|str crawler tag lowerBound upperBound nextDepth followCount|	followCount := 0.	tags := parseObject matchesIn: content.	tags do: [  :each | 		lowerBound := 2.		upperBound := (each indexOfSubCollection:' ')-1.		(upperBound < 1)			ifTrue:[				upperBound := (each indexOfSubCollection:'>')-1.				].		tag := each copyFrom:lowerBound to:upperBound.		(tagCounts includesKey:tag)		ifTrue:[			tagCounts at:tag put:(tagCounts at:tag)+1.			]		ifFalse:[			tagCounts at:tag put:1.			].		(each includesSubstring:'<a')		ifTrue: [  									lowerBound := ((each indexOfSubCollection:'href="')+6).				upperBound := ((each indexOfSubCollection:'"' startingAt:(each indexOfSubCollection:'href="')+6)-1).				(lowerBound > 0 & (upperBound < (each size)) & (lowerBound < upperBound) &(followCount < maxFollow))					ifTrue: [  						followCount  := followCount + 1.						str := each copyFrom:lowerBound to:upperBound.						(currentDepth < maxDepth)							ifTrue:[								(str includesSubstring:'http://')								ifTrue:[										crawler := WebCrawler new.									nextDepth := currentDepth+1.									crawler initializeWithURL:str withCurrentDepth:nextDepth maxPathLength:maxFollow andMaxDepth:maxDepth.									crawler fetchHtml.									self mergeCounts:(crawler parseHtml).								].							].						].					].				].						Transcript show: '-----------------------------------------'; cr.			Transcript show: 'URL: '.			Transcript show: url; cr.			Transcript show: '-----------------------------------------'; cr.			(tagCounts keys) do: [ :each | 				Transcript show: each.				Transcript show: ' '.				Transcript show: (tagCounts at:each); cr.				].			(currentDepth = 0)				ifTrue: [ 					self mergeCounts: tagCounts.						Transcript show: '-----------------------------------------'; cr.						Transcript show: 'TOTAL COUNT'; cr.						Transcript show: '-----------------------------------------'; cr.						(globalTagCounts keys) do: [ :each | 							Transcript show: each.							Transcript show: ' '.							Transcript show: (globalTagCounts at:each); cr.						].					 ].				^tagCounts! !